<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Resource hints for faster loading -->
  <link rel="preconnect" href="https://www.googletagmanager.com">
  <link rel="preconnect" href="https://www.gstatic.com">
  <link rel="dns-prefetch" href="https://www.googletagmanager.com">
  <link rel="dns-prefetch" href="https://www.gstatic.com">
  
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7X5LQ6WESD"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-7X5LQ6WESD');
</script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- Primary Meta Tags -->
  <meta name="description" content="Browse all cricket matches worldwide - live scores, recent results, and ongoing tournaments. Compact view of global cricket matches in real-time.">
  <meta name="keywords" content="all cricket matches, cricket matches worldwide, global cricket scores, cricket tournaments list, cricket match results, live cricket matches today, cricket scores worldwide, international cricket matches, local cricket matches, cricket match finder">
  <meta name="author" content="CricketBook">
  <meta name="robots" content="index, follow">
  <meta name="language" content="English">
  <meta name="revisit-after" content="1 days">
  <meta name="theme-color" content="#667eea">
  <link rel="canonical" href="https://cricketbook.digital/allmatches.html">
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://cricketbook.digital/allmatches.html">
  <meta property="og:title" content="All Cricket Matches - Global Live Scores & Results | CricketBook">
  <meta property="og:description" content="Browse all cricket matches worldwide with live scores, results, and tournament information in real-time.">
  <meta property="og:image" content="https://cricketbook.digital/og-image-allmatches.png">
  <meta property="og:site_name" content="CricketBook">
  
  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:url" content="https://cricketbook.digital/allmatches.html">
  <meta name="twitter:title" content="All Cricket Matches - Global Live Scores">
  <meta name="twitter:description" content="Browse cricket matches worldwide with live scores and results.">
  <meta name="twitter:image" content="https://cricketbook.digital/twitter-image-allmatches.png">
  
  <!-- Additional SEO -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-title" content="All Matches">
  
  <link rel="manifest" href="manifest.json">
  <title>All Cricket Matches - Global Live Scores & Results | CricketBook</title>
  
  <!-- Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebPage",
    "name": "All Cricket Matches",
    "description": "Browse all cricket matches worldwide with live scores and tournament results",
    "url": "https://cricketbook.digital/allmatches.html"
  }
  </script>
  <style>
    :root {
      /* Light mode (default) */
      --bg-gradient-start: #667eea;
      --bg-gradient-end: #764ba2;
      --card-bg: #ffffff;
      --card-border: rgba(148,163,184,.2);
      --text-primary: #1f2937;
      --text-secondary: #6b7280;
      --text-tertiary: #94a3b8;
      --nav-text: #ffffff;
      --badge-bg: rgba(255, 255, 255, 0.15);
      --badge-border: rgba(255, 255, 255, 0.1);
      --badge-hover: rgba(255, 255, 255, 0.25);
    }
    
    [data-theme="dark"] {
      /* Dark mode */
      --bg-gradient-start: #1e293b;
      --bg-gradient-end: #0f172a;
      --card-bg: #1e293b;
      --card-border: rgba(71,85,105,.3);
      --text-primary: #f1f5f9;
      --text-secondary: #cbd5e1;
      --text-tertiary: #64748b;
      --nav-text: #f1f5f9;
      --badge-bg: rgba(255, 255, 255, 0.1);
      --badge-border: rgba(255, 255, 255, 0.05);
      --badge-hover: rgba(255, 255, 255, 0.2);
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: linear-gradient(135deg, var(--bg-gradient-start) 0%, var(--bg-gradient-end) 100%);
      min-height: 100vh;
      padding: 18px;
      color: var(--text-primary);
      transition: background 0.3s ease, color 0.3s ease;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
    }
    
    .header {
      text-align: center;
      margin-bottom: 16px;
      color: white;
    }
    
    .header h1 {
      font-size: 28px;
      font-weight: 800;
      margin-bottom: 4px;
    }
    
    .header p {
      font-size: 14px;
      opacity: 0.9;
    }
    
    /* Navigation */
    .nav-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
      padding: 0 5px;
      position: relative;
      z-index: 1001;
    }

    .nav-title {
      font-size: 20px;
      font-weight: 800;
      color: var(--nav-text);
      text-shadow: 0 2px 4px rgba(0,0,0,0.1);
      cursor: pointer;
      transition: all 0.2s;
      text-decoration: none;
      display: block;
    }

    .nav-title:hover {
      transform: scale(1.05);
      text-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }

    .nav-toggle {
      background: var(--badge-bg);
      border: 1px solid var(--badge-border);
      color: var(--nav-text);
      font-size: 24px;
      padding: 8px 12px;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s;
      position: relative;
      z-index: 1002;
      width: 44px;
      height: 44px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .nav-toggle:hover {
      background: var(--badge-hover);
    }

    .nav-toggle .hamburger {
      display: block;
    }

    .nav-toggle .close {
      display: none;
      font-size: 28px;
    }

    .nav-toggle.active .hamburger {
      display: none;
    }

    .nav-toggle.active .close {
      display: block;
    }

    /* Navigation Overlay Backdrop */
    .nav-backdrop {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(4px);
      z-index: 999;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .nav-backdrop.active {
      display: block;
      opacity: 1;
    }

    /* Navigation Links Overlay */
    .nav-links {
      position: fixed;
      top: 0;
      right: -300px;
      width: 280px;
      height: 100vh;
      background: linear-gradient(180deg, var(--bg-gradient-start) 0%, var(--bg-gradient-end) 100%);
      border-left: 1px solid var(--badge-border);
      padding: 80px 20px 20px;
      box-shadow: -4px 0 20px rgba(0, 0, 0, 0.3);
      z-index: 1000;
      overflow-y: auto;
      transition: right 0.3s ease;
    }
    
    .nav-links.active {
      right: 0;
    }
    
    .nav-links a {
      display: block;
      color: var(--nav-text);
      text-decoration: none;
      padding: 14px 18px;
      margin: 8px 0;
      border-radius: 10px;
      background: var(--badge-bg);
      backdrop-filter: blur(10px);
      font-weight: 600;
      font-size: 15px;
      transition: all 0.2s;
      white-space: nowrap;
      border: 1px solid var(--badge-border);
    }
    
    .nav-links a:hover {
      background: var(--badge-hover);
      transform: translateX(-4px);
      border-color: var(--badge-border);
    }
    
    .nav-links a.active {
      background: var(--badge-hover);
      border-color: var(--badge-border);
      box-shadow: 0 0 0 2px var(--badge-border);
    }

    /* Responsive adjustments */
    @media (max-width: 480px) {
      .nav-links {
        width: 100%;
        right: -100%;
      }
    }
    
    /* Stats Overview */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
      gap: 10px;
      margin-bottom: 16px;
    }
    
    .stat-card {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 12px;
      padding: 12px 16px;
      text-align: center;
      box-shadow: 0 4px 12px rgba(0,0,0,.08);
    }
    
    .stat-value {
      font-size: 24px;
      font-weight: 800;
      color: #667eea;
      margin-bottom: 4px;
    }
    
    .stat-label {
      font-size: 12px;
      color: #6b7280;
      font-weight: 600;
    }
    
    /* Search and Filter */
    .controls {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 10px;
      padding: 12px;
      margin-bottom: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,.08);
    }
    
    .search-box {
      width: 100%;
      padding: 10px 14px;
      border: 2px solid #e5e7eb;
      border-radius: 8px;
      font-size: 14px;
      margin-bottom: 10px;
      transition: all 0.2s;
    }
    
    .search-box:focus {
      outline: none;
      border-color: #667eea;
      box-shadow: 0 0 0 3px rgba(102,126,234,0.1);
    }
    
    .filter-buttons {
      display: flex;
      gap: 6px;
      flex-wrap: wrap;
      margin-bottom: 10px;
    }
    
    .filter-btn {
      padding: 7px 14px;
      border: 2px solid #e5e7eb;
      border-radius: 8px;
      background: white;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      color: #6b7280;
    }
    
    .filter-btn:hover {
      border-color: #667eea;
      color: #667eea;
    }
    
    .filter-btn.active {
      background: #667eea;
      border-color: #667eea;
      color: white;
    }
    
    .view-toggle {
      display: flex;
      gap: 8px;
      justify-content: center;
    }
    
    .view-btn {
      padding: 8px 16px;
      border: 2px solid #e5e7eb;
      border-radius: 8px;
      background: white;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      color: #6b7280;
    }
    
    .view-btn:hover {
      border-color: #667eea;
      color: #667eea;
    }
    
    .view-btn.active {
      background: #667eea;
      border-color: #667eea;
      color: white;
    }
    
    /* Date Range Controls */
    .date-controls {
      margin-top: 10px;
      padding-top: 10px;
      border-top: 2px solid #e5e7eb;
    }
    
    .date-toggle {
      display: flex;
      gap: 6px;
      justify-content: center;
      margin-bottom: 10px;
    }
    
    .date-toggle-btn {
      flex: 1;
      padding: 8px 14px;
      border: 2px solid #e5e7eb;
      border-radius: 8px;
      background: white;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      color: #6b7280;
    }
    
    .date-toggle-btn:hover {
      border-color: #667eea;
      color: #667eea;
    }
    
    .date-toggle-btn.active {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-color: #667eea;
      color: white;
    }
    
    .date-range-picker {
      display: none;
      margin-top: 10px;
    }
    
    .date-range-picker.active {
      display: block;
    }
    
    .date-inputs {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 8px;
      margin-bottom: 10px;
    }
    
    .date-input-group {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }
    
    .date-input-label {
      font-size: 12px;
      font-weight: 600;
      color: #6b7280;
      margin-left: 4px;
    }
    
    .date-input {
      padding: 8px 10px;
      border: 2px solid #e5e7eb;
      border-radius: 8px;
      font-size: 13px;
      transition: all 0.2s;
      font-family: inherit;
    }
    
    .date-input:focus {
      outline: none;
      border-color: #667eea;
      box-shadow: 0 0 0 3px rgba(102,126,234,0.1);
    }
    
    .apply-date-btn {
      width: 100%;
      padding: 10px;
      border: none;
      border-radius: 8px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      font-size: 13px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.2s;
      box-shadow: 0 4px 12px rgba(102,126,234,0.3);
    }
    
    .apply-date-btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 6px 16px rgba(102,126,234,0.4);
    }
    
    .apply-date-btn:active {
      transform: translateY(0);
    }
    
    .week-info {
      text-align: center;
      font-size: 12px;
      color: #667eea;
      font-weight: 600;
      padding: 6px;
      background: rgba(102,126,234,0.1);
      border-radius: 6px;
      margin-top: 6px;
    }
    
    @media (max-width: 480px) {
      .date-inputs {
        grid-template-columns: 1fr;
      }
    }
    
    /* Compact Match List */
    .match-list {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    
    .match-item {
      background: white;
      border-radius: 12px;
      padding: 12px 16px;
      box-shadow: 0 2px 8px rgba(0,0,0,.06);
      transition: all 0.2s;
      cursor: pointer;
      border-left: 4px solid transparent;
    }
    
    .match-item:hover {
      transform: translateX(4px);
      box-shadow: 0 4px 12px rgba(0,0,0,.1);
    }
    
    .match-item.live {
      border-left-color: #10b981;
      background: linear-gradient(to right, rgba(16,185,129,0.05) 0%, white 20%);
    }
    
    .match-item.completed {
      border-left-color: #6b7280;
    }
    
    .match-item.stalled {
      border-left-color: #f59e0b;
    }
    
    .match-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
      gap: 12px;
    }
    
    .match-teams {
      flex: 1;
      min-width: 0;
    }
    
    .team-names {
      font-size: 15px;
      font-weight: 700;
      color: #1f2937;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    
    .match-badges {
      display: flex;
      gap: 6px;
      align-items: center;
      flex-shrink: 0;
    }
    
    .badge {
      display: inline-block;
      padding: 3px 10px;
      border-radius: 12px;
      font-size: 10px;
      font-weight: 700;
      white-space: nowrap;
    }
    
    .badge-live {
      background: #10b981;
      color: white;
      animation: pulse 2s infinite;
    }
    
    .badge-completed {
      background: #6b7280;
      color: white;
    }
    
    .badge-stalled {
      background: #f59e0b;
      color: white;
    }
    
    .badge-quick {
      background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
      color: #92400e;
      border: 1px solid #fbbf24;
    }
    
    .badge-tournament {
      background: #e0e7ff;
      color: #4338ca;
      border: 1px solid #a5b4fc;
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.7; }
    }
    
    .match-scores {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 8px;
      font-size: 13px;
      margin-bottom: 6px;
    }
    
    .score-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    
    .team-name {
      color: #6b7280;
      font-weight: 600;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 100px;
    }
    
    .score-value {
      color: #1f2937;
      font-weight: 700;
      white-space: nowrap;
    }
    
    .match-meta {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 11px;
      color: #9ca3af;
      flex-wrap: wrap;
      gap: 8px;
    }
    
    .match-result {
      color: #10b981;
      font-weight: 600;
      font-size: 12px;
      margin-top: 6px;
    }
    
    /* Grouped View */
    .tournament-group {
      margin-bottom: 16px;
    }
    
    .tournament-header {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 10px;
      padding: 12px 16px;
      margin-bottom: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,.06);
      display: flex;
      justify-content: space-between;
      align-items: center;
      cursor: pointer;
      transition: all 0.2s;
    }
    
    .tournament-header:hover {
      background: white;
      transform: translateY(-1px);
    }
    
    .tournament-name {
      font-size: 16px;
      font-weight: 700;
      color: #1f2937;
    }
    
    .tournament-count {
      background: #667eea;
      color: white;
      padding: 4px 12px;
      border-radius: 12px;
      font-size: 12px;
      font-weight: 700;
    }
    
    .tournament-matches {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }
    
    .tournament-matches.collapsed {
      display: none;
    }
    
    /* Loading and Empty States */
    .loading {
      text-align: center;
      color: white;
      font-size: 18px;
      padding: 40px;
    }
    
    .empty-state {
      background: white;
      border-radius: 16px;
      padding: 40px 20px;
      text-align: center;
      color: #6b7280;
    }
    
    .empty-state-icon {
      font-size: 48px;
      margin-bottom: 12px;
      opacity: 0.5;
    }
    
    .error {
      background: #fef2f2;
      border: 1px solid #fecaca;
      color: #991b1b;
      padding: 16px;
      border-radius: 12px;
      text-align: center;
      margin-top: 20px;
    }
    
    /* Refresh Button */
    .refresh-btn {
      position: fixed;
      bottom: 24px;
      right: 24px;
      background: #10b981;
      color: white;
      border: none;
      border-radius: 50%;
      width: 56px;
      height: 56px;
      font-size: 24px;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(16,185,129,0.3);
      transition: all 0.2s;
      z-index: 100;
    }
    
    .refresh-btn:hover {
      background: #059669;
      transform: scale(1.1);
    }
    
    .refresh-btn:active {
      transform: scale(0.95);
    }
    
    @media (max-width: 768px) {
      .refresh-btn {
        bottom: 16px;
        right: 16px;
        width: 48px;
        height: 48px;
        font-size: 20px;
      }
      
      .match-scores {
        grid-template-columns: 1fr;
      }
      
      .stats-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 8px;
        margin-bottom: 12px;
      }
      
      .stat-card {
        padding: 8px 10px;
        border-radius: 8px;
      }
      
      .stat-value {
        font-size: 18px;
        margin-bottom: 2px;
      }
      
      .stat-label {
        font-size: 10px;
      }
      
      .controls {
        padding: 12px;
        margin-bottom: 12px;
        border-radius: 10px;
      }
      
      .search-box {
        padding: 10px 12px;
        font-size: 13px;
        margin-bottom: 10px;
        border-radius: 8px;
      }
      
      .filter-btn {
        padding: 6px 12px;
        font-size: 12px;
      }
    }
    
    /* Dark Mode Toggle */
    .theme-toggle {
      background: var(--badge-bg);
      border: 1px solid var(--badge-border);
      color: var(--nav-text);
      font-size: 20px;
      padding: 8px 12px;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.2s;
      width: 44px;
      height: 44px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 8px;
    }
    
    .theme-toggle:hover {
      background: var(--badge-hover);
      transform: scale(1.05);
    }
    
    .theme-toggle:active {
      transform: scale(0.95);
    }
  </style>
  <script>
    // Dark Mode Management (Global)
    function initTheme() {
      const savedTheme = localStorage.getItem('cricketbook_theme') || 'light';
      document.documentElement.setAttribute('data-theme', savedTheme);
      updateThemeIcon(savedTheme);
    }
    
    function toggleTheme() {
      const currentTheme = document.documentElement.getAttribute('data-theme');
      const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
      document.documentElement.setAttribute('data-theme', newTheme);
      localStorage.setItem('cricketbook_theme', newTheme);
      updateThemeIcon(newTheme);
      console.log('🌓 Theme switched to:', newTheme);
    }
    
    function updateThemeIcon(theme) {
      const themeToggle = document.getElementById('themeToggle');
      if (themeToggle) {
        themeToggle.textContent = theme === 'dark' ? '🌞' : '🌜';
        themeToggle.title = theme === 'dark' ? 'Switch to Light Mode' : 'Switch to Dark Mode';
      }
    }
    
    initTheme();
    
    // Toggle mobile navigation
    function toggleNav() {
      const navLinks = document.getElementById('navLinks');
      const navBackdrop = document.getElementById('navBackdrop');
      const navToggle = document.querySelector('.nav-toggle');
      
      navLinks.classList.toggle('active');
      navBackdrop.classList.toggle('active');
      navToggle.classList.toggle('active');
      
      // Prevent body scroll when nav is open
      if (navLinks.classList.contains('active')) {
        document.body.style.overflow = 'hidden';
      } else {
        document.body.style.overflow = '';
      }
    }
  </script>
</head>
<body>
  <div class="container">
    <!-- Navigation -->
    <div class="nav-backdrop" id="navBackdrop" onclick="toggleNav()"></div>
    <div class="nav-header">
      <a href="index.html" class="nav-title">🏏 CricketBook</a>
      <div style="display: flex; align-items: center;">
        <button class="theme-toggle" id="themeToggle" onclick="toggleTheme()" title="Toggle Dark Mode">
          🌜
        </button>
        <button class="nav-toggle" onclick="toggleNav()">
          <span class="hamburger">☰</span>
          <span class="close">×</span>
        </button>
      </div>
    </div>
    <nav class="nav-links" id="navLinks">
      <a href="index.html">🏠 Home</a>
      <a href="livescore.html">📺 Live Score</a>
      <a href="matches.html">📋 My Matches</a>
      <a href="allmatches.html" class="active">🌍 All Matches</a>
      <a href="about.html">ℹ️ About</a>
    </nav>
    
    <div class="header">
      <h1>🌍 All Cricket Matches</h1>
      <p>Global Live Scores & Results</p>
    </div>
    
    <!-- Stats Overview -->
    <div id="statsOverview" class="stats-grid" style="display:none;">
      <div class="stat-card">
        <div class="stat-value" id="statTotal">0</div>
        <div class="stat-label">Total Matches</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="statLive">0</div>
        <div class="stat-label">Live Now</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="statCompleted">0</div>
        <div class="stat-label">Completed</div>
      </div>
      <div class="stat-card">
        <div class="stat-value" id="statTournaments">0</div>
        <div class="stat-label">Tournaments</div>
      </div>
    </div>
    
    <!-- Search and Filter Controls -->
    <div id="controls" class="controls" style="display:none;">
      <input type="text" id="searchBox" class="search-box" placeholder="🔍 Search teams, tournaments...">
      
      <div class="filter-buttons">
        <button class="filter-btn active" data-filter="all">All Matches</button>
        <button class="filter-btn" data-filter="live">🔴 Live</button>
        <button class="filter-btn" data-filter="completed">✅ Completed</button>
        <button class="filter-btn" data-filter="quick">⚡ Quick</button>
        <button class="filter-btn" data-filter="tournament">🏆 Tournament</button>
      </div>
      
      <!-- Date Range Controls -->
      <div class="date-controls">
        <div class="date-toggle">
          <button class="date-toggle-btn active" id="weekViewBtn" onclick="switchToWeekView()">📅 Weekly</button>
          <button class="date-toggle-btn" id="monthViewBtn" onclick="switchToMonthView()">📆 Monthly</button>
          <button class="date-toggle-btn" id="customDateBtn" onclick="switchToCustomDate()">🗓️ Range</button>
        </div>
        
        <div class="date-range-picker" id="dateRangePicker">
          <div class="date-inputs">
            <div class="date-input-group">
              <label class="date-input-label">From Date</label>
              <input type="date" id="startDate" class="date-input">
            </div>
            <div class="date-input-group">
              <label class="date-input-label">To Date</label>
              <input type="date" id="endDate" class="date-input">
            </div>
          </div>
          <button class="apply-date-btn" onclick="applyDateRange()">✅ Apply Date Range</button>
        </div>
        
        <div class="week-info" id="weekInfo" style="display:block;"></div>
      </div>
    </div>
    
    <div class="loading" id="loading">Loading all matches...</div>
    
    <!-- Match List -->
    <div id="matchList" class="match-list" style="display:none;"></div>
    
    <!-- Refresh Button -->
    <button class="refresh-btn" id="refreshBtn" onclick="refreshMatches()" style="display:none;" title="Refresh matches">
      🔄
    </button>
  </div>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/11.1.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/11.1.0/firebase-database-compat.js"></script>

  <script>
    // Firebase Configuration
    const firebaseConfig = {
      apiKey: "AIzaSyAFfwgHq761oFMg4CVqmZezGR_WK6ZGvAY",
      authDomain: "cricketbook-35725.firebaseapp.com",
      databaseURL: "https://cricketbook-35725-default-rtdb.firebaseio.com",
      projectId: "cricketbook-35725",
      storageBucket: "cricketbook-35725.firebasestorage.app",
      messagingSenderId: "128747950424",
      appId: "1:128747950424:web:dce02e8420c353f1acd52d"
    };

    // Initialize Firebase (check if firebase is loaded)
    let database;
    if (typeof firebase !== 'undefined') {
      firebase.initializeApp(firebaseConfig);
      database = firebase.database();
    } else {
      console.error('❌ Firebase SDK not loaded');
    }
    
    // Date utility functions
    function getWeekRange() {
      const today = new Date();
      today.setHours(0, 0, 0, 0);
      
      const weekStart = new Date(today);
      weekStart.setDate(today.getDate() - 3);
      
      const weekEnd = new Date(today);
      weekEnd.setDate(today.getDate() + 3);
      weekEnd.setHours(23, 59, 59, 999);
      
      return { start: weekStart, end: weekEnd };
    }
    
    function getMonthRange() {
      const today = new Date();
      const monthStart = new Date(today.getFullYear(), today.getMonth(), 1);
      monthStart.setHours(0, 0, 0, 0);
      
      const monthEnd = new Date(today.getFullYear(), today.getMonth() + 1, 0);
      monthEnd.setHours(23, 59, 59, 999);
      
      return { start: monthStart, end: monthEnd };
    }
    
    function formatDateDisplay(date) {
      return date.toLocaleDateString('en-US', { 
        month: 'short', 
        day: 'numeric',
        year: 'numeric'
      });
    }
    
    function updateWeekInfo() {
      const weekInfo = document.getElementById('weekInfo');
      if (dateViewMode === 'week') {
        const { start, end } = getWeekRange();
        weekInfo.textContent = `📅 ${formatDateDisplay(start)} - ${formatDateDisplay(end)} (7 days)`;
        weekInfo.style.display = 'block';
      } else if (dateViewMode === 'month') {
        const { start, end } = getMonthRange();
        const monthName = start.toLocaleDateString('en-US', { month: 'long', year: 'numeric' });
        weekInfo.textContent = `📆 ${monthName}`;
        weekInfo.style.display = 'block';
      } else if (dateViewMode === 'custom' && customStartDate && customEndDate) {
        weekInfo.textContent = `📅 ${formatDateDisplay(customStartDate)} - ${formatDateDisplay(customEndDate)}`;
        weekInfo.style.display = 'block';
      } else {
        weekInfo.style.display = 'none';
      }
    }
    
    function switchToWeekView() {
      dateViewMode = 'week';
      customStartDate = null;
      customEndDate = null;
      
      document.getElementById('weekViewBtn').classList.add('active');
      document.getElementById('monthViewBtn').classList.remove('active');
      document.getElementById('customDateBtn').classList.remove('active');
      document.getElementById('dateRangePicker').classList.remove('active');
      
      updateWeekInfo();
      applyFilters();
    }
    
    function switchToMonthView() {
      dateViewMode = 'month';
      customStartDate = null;
      customEndDate = null;
      
      document.getElementById('weekViewBtn').classList.remove('active');
      document.getElementById('monthViewBtn').classList.add('active');
      document.getElementById('customDateBtn').classList.remove('active');
      document.getElementById('dateRangePicker').classList.remove('active');
      
      updateWeekInfo();
      applyFilters();
    }
    
    function switchToCustomDate() {
      dateViewMode = 'custom';
      
      document.getElementById('weekViewBtn').classList.remove('active');
      document.getElementById('monthViewBtn').classList.remove('active');
      document.getElementById('customDateBtn').classList.add('active');
      document.getElementById('dateRangePicker').classList.add('active');
      
      // Set default dates if not set
      if (!document.getElementById('startDate').value) {
        const today = new Date();
        const weekAgo = new Date(today);
        weekAgo.setDate(today.getDate() - 7);
        
        document.getElementById('startDate').value = weekAgo.toISOString().split('T')[0];
        document.getElementById('endDate').value = today.toISOString().split('T')[0];
      }
      
      updateWeekInfo();
    }
    
    function applyDateRange() {
      const startDateInput = document.getElementById('startDate').value;
      const endDateInput = document.getElementById('endDate').value;
      
      if (!startDateInput || !endDateInput) {
        alert('⚠️ Please select both start and end dates');
        return;
      }
      
      customStartDate = new Date(startDateInput);
      customStartDate.setHours(0, 0, 0, 0);
      
      customEndDate = new Date(endDateInput);
      customEndDate.setHours(23, 59, 59, 999);
      
      if (customStartDate > customEndDate) {
        alert('⚠️ Start date must be before end date');
        return;
      }
      
      updateWeekInfo();
      applyFilters();
    }
    
    function isMatchInDateRange(match) {
      const matchTimestamp = match.timestamp || match.lastUpdated || 0;
      if (!matchTimestamp) return true; // Include matches without timestamp
      
      const matchDate = new Date(matchTimestamp);
      
      if (dateViewMode === 'week') {
        const { start, end } = getWeekRange();
        return matchDate >= start && matchDate <= end;
      } else if (dateViewMode === 'month') {
        const { start, end } = getMonthRange();
        return matchDate >= start && matchDate <= end;
      } else if (dateViewMode === 'custom' && customStartDate && customEndDate) {
        return matchDate >= customStartDate && matchDate <= customEndDate;
      }
      
      return true; // Default: show all
    }

    // Global state
    let allMatches = [];
    let filteredMatches = [];
    let currentFilter = 'all';
    let searchQuery = '';
    let dateViewMode = 'week'; // 'week', 'month', or 'custom'
    let customStartDate = null;
    let customEndDate = null;
    let collapsedTournaments = new Set();
    let isAllDataLoaded = false; // Track if we've loaded all data
    let isLoadingMore = false; // Prevent multiple simultaneous loads
    
    // Load ALL matches from Firebase (not just user's matches)
    function loadAllMatches(loadAll = false) {
      if (loadAll) {
        console.log('🌍 Loading ALL matches from Firebase (full history)...');
      } else {
        console.log('🌍 Loading matches from Firebase (optimized load)...');
      }
      
      // Get all organizations' matches
      // Note: We need to load all data as Firebase doesn't support querying nested match timestamps at org level
      const tournamentsPromise = database.ref('tournaments').once('value');
      const quickMatchesPromise = database.ref('quickMatches').once('value');
      
      if (loadAll) {
        isAllDataLoaded = true;
      }
      
      Promise.all([tournamentsPromise, quickMatchesPromise]).then(([tournamentsSnapshot, quickMatchesSnapshot]) => {
        let allMatchesObj = {};
        
        // Load tournament matches from all organizations
        const tournamentsData = tournamentsSnapshot.val() || {};
        Object.keys(tournamentsData).forEach(orgId => {
          const orgMatches = tournamentsData[orgId]?.matches || {};
          Object.keys(orgMatches).forEach(matchId => {
            allMatchesObj[matchId] = {
              ...orgMatches[matchId],
              matchId: matchId,
              organizationId: orgId
            };
          });
        });
        
        // Load quick matches from all organizations
        const quickMatchesData = quickMatchesSnapshot.val() || {};
        Object.keys(quickMatchesData).forEach(orgId => {
          const orgMatches = quickMatchesData[orgId]?.matches || {};
          Object.keys(orgMatches).forEach(matchId => {
            allMatchesObj[matchId] = {
              ...orgMatches[matchId],
              matchId: matchId,
              organizationId: orgId
            };
          });
        });
        
        // Convert to array and sort by lastUpdated timestamp (newest first)
        allMatches = Object.values(allMatchesObj).sort((a, b) => {
          const timeA = a.lastUpdated || a.timestamp || 0;
          const timeB = b.lastUpdated || b.timestamp || 0;
          return timeB - timeA;
        });
        
        const loadType = loadAll ? 'total' : '';
        console.log(`📊 Loaded ${allMatches.length} matches ${loadType}`.trim());
        
        if (allMatches.length === 0) {
          document.getElementById('loading').innerHTML = '<div class="empty-state"><div class="empty-state-icon">🏏</div><div style="font-size:18px;font-weight:700;margin-bottom:8px;color:#1f2937;">No Matches Found</div><div style="color:#6b7280;font-size:14px;line-height:1.6;margin-bottom:20px;">No cricket matches are available worldwide at the moment.<br>Start scoring a match and it will appear here for everyone!</div><a href="index.html" style="background:linear-gradient(135deg, #667eea 0%, #764ba2 100%);color:white;padding:12px 28px;border-radius:12px;text-decoration:none;display:inline-block;font-weight:700;box-shadow:0 4px 12px rgba(102,126,234,0.3);transition:all 0.2s;">🏠 Go to Home</a></div>';
          return;
        }
        
        // Update stats
        updateStats();
        
        // Initialize week view
        updateWeekInfo();
        
        // Apply filters and display
        applyFilters();
        
        // Show controls and content
        document.getElementById('statsOverview').style.display = 'grid';
        document.getElementById('controls').style.display = 'block';
        document.getElementById('matchList').style.display = 'flex';
        document.getElementById('refreshBtn').style.display = 'block';
        document.getElementById('loading').style.display = 'none';
        isLoadingMore = false;
        
      }).catch((error) => {
        console.error('❌ Firebase error:', error);
        document.getElementById('loading').innerHTML = '<div class="error">Error loading matches: ' + error.message + '<br><br><button onclick="location.reload()" style="background:#8b5cf6;color:white;border:none;padding:10px 24px;border-radius:10px;font-size:14px;font-weight:600;cursor:pointer;margin-top:12px;">🔄 Try Again</button></div>';
      });
    }
    
    // Update statistics
    function updateStats() {
      const total = allMatches.length;
      
      const live = allMatches.filter(match => isLiveMatch(match)).length;
      
      const completed = allMatches.filter(match => {
        const hasResult = match.resultText && match.resultText.trim() !== '';
        const isComplete = match.matchCompleted || (match.first?.done && match.second?.done);
        return hasResult || isComplete;
      }).length;
      
      const tournaments = new Set(allMatches.map(m => m.tournamentName || '').filter(t => t.trim() !== '')).size;
      
      document.getElementById('statTotal').textContent = total;
      document.getElementById('statLive').textContent = live;
      document.getElementById('statCompleted').textContent = completed;
      document.getElementById('statTournaments').textContent = tournaments;
    }
    
    // Check if match is live
    function isLiveMatch(match) {
      if (match.matchCompleted) return false;
      if (match.resultText && match.resultText.trim() !== '') return false;
      
      const firstDone = match.first?.done || false;
      const secondDone = match.second?.done || false;
      const inSecond = match.inSecond || false;
      
      return (!inSecond && !firstDone) || (inSecond && !secondDone);
    }
    
    // Check if match is stalled (no update in 15+ minutes)
    function isStalledMatch(match) {
      if (!isLiveMatch(match)) return false;
      
      const currentTime = Date.now();
      const lastUpdate = match.lastUpdated || match.timestamp || 0;
      const minutesSinceUpdate = (currentTime - lastUpdate) / (1000 * 60);
      
      return minutesSinceUpdate >= 15;
    }
    
    // Apply filters
    function applyFilters() {
      filteredMatches = allMatches.filter(match => {
        // Date range filter
        if (!isMatchInDateRange(match)) {
          return false;
        }
        
        // Text search
        if (searchQuery) {
          const query = searchQuery.toLowerCase();
          const teamA = (match.teamA || '').toLowerCase();
          const teamB = (match.teamB || '').toLowerCase();
          const tournament = (match.tournamentName || '').toLowerCase();
          
          if (!teamA.includes(query) && !teamB.includes(query) && !tournament.includes(query)) {
            return false;
          }
        }
        
        // Filter by type
        if (currentFilter === 'live') {
          return isLiveMatch(match);
        } else if (currentFilter === 'completed') {
          const hasResult = match.resultText && match.resultText.trim() !== '';
          const isComplete = match.matchCompleted || (match.first?.done && match.second?.done);
          return hasResult || isComplete;
        } else if (currentFilter === 'quick') {
          return !match.tournamentName || match.tournamentName.trim() === '';
        } else if (currentFilter === 'tournament') {
          return match.tournamentName && match.tournamentName.trim() !== '';
        }
        
        return true; // 'all' filter
      });
      
      // Update stats after filtering
      updateFilteredStats();
      
      displayMatches();
    }
    
    // Update stats for filtered matches
    function updateFilteredStats() {
      const total = filteredMatches.length;
      const live = filteredMatches.filter(match => isLiveMatch(match)).length;
      const completed = filteredMatches.filter(match => {
        const hasResult = match.resultText && match.resultText.trim() !== '';
        const isComplete = match.matchCompleted || (match.first?.done && match.second?.done);
        return hasResult || isComplete;
      }).length;
      const tournaments = new Set(filteredMatches.map(m => m.tournamentName || '').filter(t => t.trim() !== '')).size;
      
      document.getElementById('statTotal').textContent = total;
      document.getElementById('statLive').textContent = live;
      document.getElementById('statCompleted').textContent = completed;
      document.getElementById('statTournaments').textContent = tournaments;
    }
    
    // Display matches
    function displayMatches() {
      const container = document.getElementById('matchList');
      
      if (filteredMatches.length === 0) {
        container.innerHTML = '<div class="empty-state"><div class="empty-state-icon">🔍</div><div style="font-size:16px;font-weight:700;color:#1f2937;margin-bottom:8px;">No Matches Found</div><div style="color:#6b7280;font-size:14px;line-height:1.6;">Try adjusting your filters or search query to find matches</div></div>';
        return;
      }
      
      displayListMatches();
    }
    
    // Display list view
    function displayListMatches() {
      const container = document.getElementById('matchList');
      
      container.innerHTML = filteredMatches.map(match => {
        return createMatchCard(match);
      }).join('');
      
      // Add click handlers
      document.querySelectorAll('.match-item').forEach(item => {
        item.addEventListener('click', () => {
          const matchId = item.dataset.matchId;
          const orgId = item.dataset.orgId;
          window.location.href = `livescore.html?org=${orgId}&match=${matchId}`;
        });
      });
    }
    
    // Display grouped view (by tournament)
    function displayGroupedMatches() {
      const container = document.getElementById('matchList');
      
      // Group matches by tournament
      const grouped = {};
      filteredMatches.forEach(match => {
        const tournamentName = match.tournamentName && match.tournamentName.trim() !== '' 
          ? match.tournamentName 
          : '⚡ Quick Matches';
        
        if (!grouped[tournamentName]) {
          grouped[tournamentName] = [];
        }
        grouped[tournamentName].push(match);
      });
      
      // Sort tournament names
      const tournamentNames = Object.keys(grouped).sort((a, b) => {
        if (a === '⚡ Quick Matches') return 1;
        if (b === '⚡ Quick Matches') return -1;
        return a.localeCompare(b);
      });
      
      container.innerHTML = tournamentNames.map(tournamentName => {
        const matches = grouped[tournamentName];
        const isCollapsed = collapsedTournaments.has(tournamentName);
        
        return `
          <div class="tournament-group">
            <div class="tournament-header" onclick="toggleTournament('${tournamentName.replace(/'/g, "\\'")}')">
              <div class="tournament-name">${tournamentName}</div>
              <div class="tournament-count">${matches.length}</div>
            </div>
            <div class="tournament-matches ${isCollapsed ? 'collapsed' : ''}" id="tournament-${tournamentName.replace(/\s+/g, '-')}">
              ${matches.map(match => createMatchCard(match)).join('')}
            </div>
          </div>
        `;
      }).join('');
      
      // Add click handlers
      document.querySelectorAll('.match-item').forEach(item => {
        item.addEventListener('click', () => {
          const matchId = item.dataset.matchId;
          const orgId = item.dataset.orgId;
          window.location.href = `livescore.html?org=${orgId}&match=${matchId}`;
        });
      });
    }
    
    // Create match card HTML
    function createMatchCard(match) {
      const firstScore = `${match.first?.runs || 0}/${match.first?.wkts || 0}`;
      const firstOvers = calculateOvers(match.first?.legalBalls || 0);
      const secondScore = `${match.second?.runs || 0}/${match.second?.wkts || 0}`;
      const secondOvers = calculateOvers(match.second?.legalBalls || 0);
      
      const live = isLiveMatch(match);
      const stalled = isStalledMatch(match);
      const hasResult = match.resultText && match.resultText.trim() !== '';
      const completed = hasResult || match.matchCompleted;
      
      let statusClass = '';
      let statusBadge = '';
      
      if (live) {
        if (stalled) {
          statusClass = 'stalled';
          statusBadge = '<span class="badge badge-stalled">⚠️ Stalled</span>';
        } else {
          statusClass = 'live';
          statusBadge = '<span class="badge badge-live">🔴 LIVE</span>';
        }
      } else if (completed) {
        statusClass = 'completed';
        statusBadge = '<span class="badge badge-completed">✅ Done</span>';
      }
      
      const isQuickMatch = !match.tournamentName || match.tournamentName.trim() === '';
      const typeBadge = isQuickMatch
        ? '<span class="badge badge-quick">⚡ Quick</span>'
        : '<span class="badge badge-tournament">🏆 ' + (match.matchType || 'Tournament') + '</span>';
      
      const dateStr = match.timestamp ? new Date(match.timestamp).toLocaleDateString('en-US', { 
        month: 'short', 
        day: 'numeric',
        hour: '2-digit',
        minute: '2-digit'
      }) : '';
      
      const tournamentLabel = !isQuickMatch ? `<span style="font-size:11px;color:#667eea;font-weight:700;">#${match.tournamentName}</span>` : '';
      
      return `
        <div class="match-item ${statusClass}" data-match-id="${match.matchId}" data-org-id="${match.organizationId}">
          <div class="match-header">
            <div class="match-teams">
              <div class="team-names">${match.teamA || 'Team A'} vs ${match.teamB || 'Team B'}</div>
              ${tournamentLabel}
            </div>
            <div class="match-badges">
              ${statusBadge}
              ${typeBadge}
            </div>
          </div>
          
          <div class="match-scores">
            <div class="score-item">
              <span class="team-name">${match.teamA || 'Team A'}</span>
              <span class="score-value">${firstScore} (${firstOvers})</span>
            </div>
            <div class="score-item">
              <span class="team-name">${match.teamB || 'Team B'}</span>
              <span class="score-value">${secondScore} (${secondOvers})</span>
            </div>
          </div>
          
          ${hasResult ? `<div class="match-result">🏆 ${match.resultText}</div>` : ''}
          
          <div class="match-meta">
            <span>${dateStr}</span>
            <span>Org: ${match.organizationId?.substring(0, 8)}...</span>
          </div>
        </div>
      `;
    }
    
    // Calculate overs
    function calculateOvers(legalBalls) {
      if (!legalBalls) return '0.0';
      const overs = Math.floor(legalBalls / 6);
      const balls = legalBalls % 6;
      return `${overs}.${balls}`;
    }
    
    // Toggle tournament group
    function toggleTournament(tournamentName) {
      const groupId = 'tournament-' + tournamentName.replace(/\s+/g, '-');
      const group = document.getElementById(groupId);
      
      if (group) {
        group.classList.toggle('collapsed');
        
        if (group.classList.contains('collapsed')) {
          collapsedTournaments.add(tournamentName);
        } else {
          collapsedTournaments.delete(tournamentName);
        }
      }
    }
    
    // Refresh matches
    function refreshMatches() {
      document.getElementById('loading').style.display = 'block';
      document.getElementById('loading').textContent = 'Refreshing matches...';
      document.getElementById('matchList').style.display = 'none';
      document.getElementById('statsOverview').style.display = 'none';
      document.getElementById('controls').style.display = 'none';
      
      loadAllMatches();
    }
    
    // Event Listeners
    document.getElementById('searchBox').addEventListener('input', (e) => {
      searchQuery = e.target.value;
      applyFilters();
    });
    
    document.querySelectorAll('.filter-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        currentFilter = btn.dataset.filter;
        applyFilters();
      });
    });
    
    // Initial load
    loadAllMatches();
    
    // Auto-refresh every 2 minutes for live matches
    setInterval(() => {
      console.log('🔄 Auto-refreshing matches...');
      loadAllMatches();
    }, 120000);
  </script>

  <!-- Footer -->
  <footer style="text-align:center;padding:24px 0;color:#ffffff;font-size:14px;margin-top:24px;">
    <p style="margin:0 0 8px;">Made with ❤️ for cricket lovers worldwide.</p>
    <p style="margin:0 0 8px;opacity:0.9;">© 2026 CricketBook — Global Cricket Scoring Platform</p>
    <p style="margin:0;"><a href="https://www.instagram.com/cricketbook.digital/" target="_blank" rel="noopener noreferrer" style="color:white;text-decoration:none;font-weight:600;opacity:0.95;transition:opacity 0.2s;" onmouseover="this.style.opacity='1'" onmouseout="this.style.opacity='0.95'">📷 Follow us on Instagram</a></p>
  </footer>
  <script>
    // Register Service Worker for PWA (only works on HTTP/HTTPS)
    if ('serviceWorker' in navigator && window.location.protocol !== 'file:') {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/service-worker.js')
          .then(reg => console.log('✅ Service Worker registered:', reg.scope))
          .catch(err => console.log('❌ Service Worker registration failed:', err));
      });
    }
  </script>

</body>
</html>
